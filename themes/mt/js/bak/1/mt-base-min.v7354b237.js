// JavaScript Document
M.add("mt-base",function(Y){var $N=Y.Node,isIE=Y.UA.ie,isIE6=6===isIE,isStr=Y.Lang.isString,isArray=Y.Lang.isArray,isObject=Y.Lang.isObject,isFunction=Y.Lang.isFunction,trim=Y.Lang.trim;Y.namespace("mt.lang"),Y.mt.lang={date:function(e,t){var n,r,a,i=this,o=/\\?([a-z])/gi,u=function(e,t){return(e+="").length<t?new Array(++t-e.length).join("0")+e:e},s=["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur","January","February","March","April","May","June","July","August","September","October","November","December"],c={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"};return a=function(e,t){return r[e]?r[e]():t},r={d:function(){return u(r.j(),2)},D:function(){return r.l().slice(0,3)},j:function(){return n.getDate()},l:function(){return s[r.w()]+"day"},N:function(){return r.w()||7},S:function(){return c[r.j()]||"th"},w:function(){return n.getDay()},z:function(){var e=new Date(r.Y(),r.n()-1,r.j()),t=new Date(r.Y(),0,1);return Math.round((e-t)/864e5)+1},W:function(){var e=new Date(r.Y(),r.n()-1,r.j()-r.N()+3),t=new Date(e.getFullYear(),0,4);return 1+Math.round((e-t)/864e5/7)},F:function(){return s[6+r.n()]},m:function(){return u(r.n(),2)},M:function(){return r.F().slice(0,3)},n:function(){return n.getMonth()+1},t:function(){return new Date(r.Y(),r.n(),0).getDate()},L:function(){return 1===new Date(r.Y(),1,29).getMonth()?1:0},o:function(){var e=r.n(),t=r.W(),n=r.Y();return n+(12===e&&9>t?-1:1===e&&t>9)},Y:function(){return n.getFullYear()},y:function(){return(r.Y()+"").slice(-2)},a:function(){return n.getHours()>11?"pm":"am"},A:function(){return r.a().toUpperCase()},B:function(){var e=3600*n.getUTCHours(),t=60*n.getUTCMinutes(),r=n.getUTCSeconds();return u(Math.floor((e+t+r+3600)/86.4)%1e3,3)},g:function(){return r.G()%12||12},G:function(){return n.getHours()},h:function(){return u(r.g(),2)},H:function(){return u(r.G(),2)},i:function(){return u(n.getMinutes(),2)},s:function(){return u(n.getSeconds(),2)},u:function(){return u(1e3*n.getMilliseconds(),6)},e:function(){throw"Not supported (see source code of date() for timezone on how to add support)"},I:function(){var e=new Date(r.Y(),0),t=Date.UTC(r.Y(),0),n=new Date(r.Y(),6),a=Date.UTC(r.Y(),6);return 0+(e-t!==n-a)},O:function(){var e=n.getTimezoneOffset();return(e>0?"-":"+")+u(Math.abs(e/60*100),4)},P:function(){var e=r.O();return e.substr(0,3)+":"+e.substr(3,2)},T:function(){return"UTC"},Z:function(){return 60*-n.getTimezoneOffset()},c:function(){return"Y-m-d\\Th:i:sP".replace(o,a)},r:function(){return"D, d M Y H:i:s O".replace(o,a)},U:function(){return parseInt(n.getTime()/1e3,10)}},this.date=function(e,t){return i=this,n="undefined"==typeof t?new Date:new Date(t instanceof Date?t:1e3*t),e.replace(o,a)},this.date(e,t)},strtotime:function(e,t){var n,r,a,i="",o="";if(i=trim(e+""),i=i.replace(/\s{2,}|^\s|\s$/g," "),i=i.replace(/[\t\r\n]/g,""),"now"===i)return(new Date).getTime()/1e3;if(!isNaN(o=Date.parse(i)))return o/1e3;t=t?new Date(1e3*t):new Date,i=i.toLowerCase();var u={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:{jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}},s=function(e){var n=e[2]&&"ago"===e[2],r=(r="last"===e[0]?-1:1)*(n?-1:1);switch(e[0]){case"last":case"next":switch(e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"mon":t.setMonth(t.getMonth()+r);break;case"wee":t.setDate(t.getDate()+7*r);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r);break;default:var a;if("undefined"!=typeof(a=u.day[e[1].substring(0,3)])){var i=a-t.getDay();0===i?i=7*r:i>0?"last"===e[0]&&(i-=7):"next"===e[0]&&(i+=7),t.setDate(t.getDate()+i)}}break;default:if(!/\d+/.test(e[0]))return!1;switch(r*=parseInt(e[0],10),e[1].substring(0,3)){case"yea":t.setFullYear(t.getFullYear()+r);break;case"mon":t.setMonth(t.getMonth()+r);break;case"wee":t.setDate(t.getDate()+7*r);break;case"day":t.setDate(t.getDate()+r);break;case"hou":t.setHours(t.getHours()+r);break;case"min":t.setMinutes(t.getMinutes()+r);break;case"sec":t.setSeconds(t.getSeconds()+r);break;default:t.setSeconds(t.getSeconds()+r)}}return!0};if(r=i.match(/^(\d{2,4}-\d{1,2}-\d{1,2})(?:\s(\d{1,2}:\d{1,2}(:\d{1,2})?)?(?:\.(\d+))?)?$/),null!==r){r[2]?r[3]||(r[2]+=":00"):r[2]="00:00:00",a=r[1].split(/-/g);for(n in u.mon)u.mon[n]===a[1]-1&&(a[1]=n);return a[0]=parseInt(a[0],10),a[0]=a[0]>=0&&a[0]<=69?"20"+(a[0]<10?"0"+a[0]:a[0]+""):a[0]>=70&&a[0]<=99?"19"+a[0]:a[0]+"",parseInt(Y.mt.lang.strtotime(a[2]+" "+a[1]+" "+a[0]+" "+r[2])+(r[4]?r[4]/1e3:""),10)}var c="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(r=i.match(new RegExp(c,"gi")),null===r)return!1;for(n=0;n<r.length;n++)if(!s(r[n].split(" ")))return!1;return t.getTime()/1e3},getReadableWeek:function(e){var t=Y.mt.lang.date("w",e),n=["日","一","二","三","四","五","六"],r=n[t];return"周"+r},getLength:function(e){if(!e||!isStr(e))return 0;for(var t=0,n=0,r=e.length;r>t;t++)n=e.charCodeAt(t)>255?n+2:n+1;return n},truncateStr:function(e,t,n){var r,a,i=0,o=!0,u=e;for(n=n||"",r=0;t>=i;r++){if(a=e.charCodeAt(r),isNaN(a)){o=!1;break}i+=a>255?2:1}return i>t&&r--,o&&(u=e.substring(0,r)+n),u},toFull:function(e){for(var t="",n=0,r=e.length;r>n;n++){var a=e.charCodeAt(n);t+=32===a?String.fromCharCode(12288):127>a?String.fromCharCode(a+65248):e[n]}return t},toHalf:function(e){for(var t="",n=0,r=e.length;r>n;n++){var a=e.charCodeAt(n);t+=String.fromCharCode(12288===a?32:a>65280&&65375>a?a-65248:a)}return t},parseStr:function(e,t,n,r,a){if(!e||!isStr(e))return null;"undefined"==typeof t&&(t=!0),"undefined"==typeof a&&(a=!0),n=n||"&";var i,o,u,s,c,d=e.split(n),l={};for(i=0,o=d.length;o>i;i++)u=d[i].split("="),u.length>2&&(u[1]=u.slice(1).join("=")),s=a?decodeURIComponent(u[0]):u[0],c=a?decodeURIComponent(u[1]):u[1],t?l[s]=c:l.hasOwnProperty(s)?(isArray(l[s])||(l[s]=[l[s]]),l[s].push(c),r&&(l[s]=l[s].join(r))):l[s]=c;return l},pad:function(e,t,n){n=n||"0";for(var r=e.toString().length;t>r;)e=n+e,r++;return e},parseDate:function(e){var t=e.split(" "),n=t[1]+" "+t[2]+", "+t[5]+" "+t[3];return Date.parse(n)-60*(new Date).getTimezoneOffset()*1e3},getRelativeTime:function(e){var t=isStr(e)?this.parseDate(e).valueOf():e,n=new Date,r=parseInt((n.getTime()-t)/1e3,10);return 1>r?"1 秒前":60>r?r+" 秒前":3600>r?parseInt(r/60,10)+" 分钟前":86400>r?"约 "+parseInt(r/3600,10)+" 小时前":this.getFullTime(e)},getFullTime:function(e){var t=new Date(isStr(e)?this.parseDate(e):e),n=t.getFullYear(),r=this.pad(t.getMonth()+1,2),a=this.pad(t.getDate(),2),i=this.pad(t.getHours(),2),o=this.pad(t.getMinutes(),2);return n+"-"+r+"-"+a+" "+i+":"+o},inArray:function(e,t,n){var r="",a=!!n;if(a){for(r in t)if(t[r]===e)return!0}else for(r in t)if(t[r]==e)return!0;return!1},ucfirst:function(e){return e+="",e.charAt(0).toUpperCase()+e.substr(1)},toArray:function(e){var t=null;try{t=Array.prototype.slice.call(e,0)}catch(n){t=[];for(var r=0,a=e.length;a>r;++r)t.push(e[r])}return t},clamp:function(e,t,n){return Math.min(n,Math.max(t,e))},isExist:function(e){return null!==e&&"undefined"!=typeof e},isNumeric:function(e){return this.isExist(e)&&/\d/.test(e)&&!isNaN(e)},htmlEscape:function(e){return e.replace(/[<>"&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}})}},Y.namespace("mt.util"),Y.mt.util={isSupportPlaceholder:function(){var e=document.createElement("input");return"placeholder"in e},getEvalRes:function(e,t){if(!e||!e.responseText)return e;var n=this.decodeJSON(e.responseText);return n||{status:0,msg:t||"网络有问题，请稍后重试。"}},decodeJSON:function(str){try{return eval("("+str+")")}catch(ex){return null}},decodeAttr:function(e,t){var n=Y.mt.util.data(e,t);return n?Y.mt.util.decodeJSON(n):null},ctrlEnter:function(e,t){e=Y.one(e),e&&e.on("key",function(e){e.halt(),t()},"down:13+ctrl")},toPostData:function(e,t){if(!Y.Lang.isObject(e))return e;"undefined"==typeof t&&(t=!0);var n=[],r=this;return Y.Object.each(e,function(e,a){var i;isArray(e)?Y.Array.each(e,function(e){i=r.joinKeyValue(a,e,t),n.push(i)}):(i=r.joinKeyValue(a,e,t),n.push(i))}),n.join("&")},joinKeyValue:function(e,t,n){return n?this.encodeText(e)+"="+this.encodeText(t):e+"="+t},encodeText:function(e){return e?encodeURIComponent(e):e},loadImage:function(e){var t=new Image;t.src=e},data:function(e,t,n){if(e=Y.one(e),!e||!isStr(t))return!1;var r="data-"+t;return void 0===n?e.getAttribute(r):(isStr(n)||(n=Y.JSON.stringify(n)),e.setAttribute(r,n.replace(/'/g,"&#039;")),!0)},field:function(e,t,n){if(e=Y.one(e),!e||"form"!==e.get("tagName").toLowerCase())return!1;var r,a=$N.getDOMNode(e);return void 0===n?Y.one(a.elements[t]):(r=Y.one(a.elements[t]))?(r.set("value",n),!0):!1},toggle:function(e,t){if(e=Y.one(e)){var n=void 0===t?"none"===e.getStyle("display"):t;e.setStyle("display",n?"block":"none")}},addLoadListener:function(e){var t=window.onload;window.onload=isFunction(t)?function(){t(),e()}:e},addUnloadListener:function(e){var t=window.onbeforeunload;window.onbeforeunload=isFunction(t)?function(){var n,r;return n=t(),r=e(),r||n}:e},throttle:function(e,t){var n=null;return t=t||0,function(){n||(n=window.setTimeout(function(){e(),n=null},t))}},detachHandle:function(e){if(e){var t;for(t in e)e.hasOwnProperty(t)&&e[t]&&(isFunction(e[t].detach)?e[t].detach():Y.mt.util.detachHandle(e[t]))}},objToString:function(e,t){if(t&&"deep"===t)return Y.JSON.stringify(e);var n=[],r="",a="",i=Y.Object.keys(e);n.push("{");for(var o=0;o<i.length;o++)r=i[o],a=e[r],n.push(r+":"),a&&(a=isObject(a)?null:a.toString()),n.push("'"+a+"'"),o!==i.length-1&&n.push(",");return n.push("}"),n.join("")},getKeys:function(e){var t=[];for(var n in e)"object"==typeof e&&"function"!=typeof e&&e.hasOwnProperty(n)&&t.push(n);return t},reflow:function(e){e=Y.one(e);var t=e?e.getDOMNode():document.body;t.className=t.className},Cookie:{getExpiresDate:function(e,t,n){var r=new Date;return"number"==typeof e&&"number"==typeof t&&"number"==typeof t?(r.setDate(r.getDate()+parseInt(e,10)),r.setHours(r.getHours()+parseInt(t,10)),r.setMinutes(r.getMinutes()+parseInt(n,10)),r.toGMTString()):void 0},_getValue:function(e){var t=document.cookie,n=t.indexOf(";",e);return-1===n&&(n=t.length),decodeURIComponent(t.substring(e,n))},get:function(e){for(var t=document.cookie,n=e+"=",r=n.length,a=t.length,i=0;a>i;){var o=i+r;if(t.substring(i,o)===n)return this._getValue(o);if(i=t.indexOf(" ",i)+1,0===i)break}return""},set:function(e,t,n,r,a,i){document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+n:"")+(r?"; path="+r:"")+(a?"; domain="+a:"")+(i?"; secure":"")},remove:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"")+(n?"; domain="+n:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")},clear:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++)this.remove(trim(e[t].split("=")[0]),"/","mt.com"),this.remove(trim(e[t].split("=")[0]),"/","kxapp.mt.com")}}},Y.namespace("mt.Tracking"),Y.mt.Tracking={init:function(){function e(e){var t=e.getAttribute(n);if(t){var r=t.split("|"),i=r[0],o=r[1],u=r[2],s=r[3];!u&&e.get("href")&&(u=e.get("href").replace("http://","")),"undefined"!=typeof a&&a&&a.push(["_trackEvent",i,o,u,s])}}function t(e){var t,n,i=e.get("href"),o=/^(http:\/\/|mailto:)/;if(i&&o.test(i)){if(i=i.replace("http://",""),t=i.indexOf("?"),n=e.getAttribute(r),t>0&&(i=i.substring(0,t)),/\.(meituan|mt|sankuai)\.com/.test(i))return;n&&(i+="#label="+n),a&&a.push(["_trackEvent","OutLink","Click",i])}}var n="gaevent",r="galabel",a=window._gaq,i=Y.one(document.body);i.delegate("click",function(){var n=this;Y.mt.Tracking.trackEventByNode(n),e(n),n.test("a")&&t(n)},"[gaevent], [data-mtevent], a")},trackPageview:function(){M.trackPageview.apply(Y,arguments)},trackEvent:function(){M.trackEvent.apply(Y,arguments)},trackEventByNode:function(e){var t,n,r,a="mtevent",i=Y.mt.util.decodeAttr(e,a);i&&(t=i.ca,n=i.ac,r=i.la,delete i.ca,delete i.ac,delete i.la,this.trackEvent(t,n,r,i))}},Y.mt.macro={key:{BACKSPACE:8,TAB:9,ENTER:13,PAGEUP:33,PAGEDOWN:34,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40}},Y.namespace("mt.widget"),Y.mix(Y.mt.widget,{preload:function(e){M.Widget={preload:{modules:[],instances:{}},lazyload:{modules:[],instances:{}},map:this.getWidgetMap(),instances:{}};var t,n=M.Widget.map,r=M.Widget.preload,a=M.Widget.lazyload,i=Y.mt.util.decodeJSON,o="[data-widget], [data-uix]";if(e){var u=Y.one(e);u&&(t=u.all(o))}else t=Y.all(o);t&&t.size()&&t.each(function(e){var t=e.getAttribute("data-widget")||e.getAttribute("data-uix"),o=t.toLowerCase(),u=Y.Array.indexOf;if(!e.hasAttribute("data-widget-init")&&(e.setAttribute("data-widget-init",!0),t&&n[o])){var s=i(e.getAttribute("data-params"))||e.getData("data-params")||{},c=e.hasAttribute("data-uix"),d=!!s.lazyload;d?(a.instances[t]||(a.instances[t]=[]),a.instances[t].push({node:e,params:s,isUIX:c}),-1===u(a.modules,n[o])&&a.modules.push(n[o])):(r.instances[t]||(r.instances[t]=[]),r.instances[t].push({node:e,params:s,isUIX:c}),-1===u(r.modules,n[o])&&r.modules.push(n[o]))}})},init:function(e){function t(e,t){var a=r(t);Y.Array.each(e,function(e){var t=e.isUIX?Y.mt.uix[a]:Y.mt.widget[a];t&&n.widgetInit(t,e.node)})}this.preload(e);var n=this,r=Y.mt.lang.ucfirst,a=M.Widget.preload,i=M.Widget.lazyload;if(a.modules.length&&!Y.Object.isEmpty(a.instances)&&Y.use(a.modules,function(e){e.Object.each(a.instances,t),e.Global.fire("Widget.init.complete",M.Widget)}),i.modules.length&&!Y.Object.isEmpty(i.instances))if("complete"===document.readyState)Y.use(i.modules,function(e){e.Object.each(i.instances,t)});else{var o=window.onload;window.onload=function(){o&&o(),Y.use(i.modules,function(e){e.Object.each(i.instances,t)})}}},widgetInit:function(e,t){var n,r=Y.mt.util.decodeJSON,a=e.superclass&&e.superclass.constructor&&e.superclass.constructor.NAME,i=r(t.getAttribute("data-params"))||t.getData("data-params")||{},o=t.hasAttribute("data-uix");o?n=new e(t,i):a?(i.node=t,n=new e(i),n.render()):n=new e(t,i),this.saveWidget(t,n)},saveWidget:function(e,t){e=Y.one(e),e&&(e.get("id")||e.set("id",Y.guid()),M.Widget.instances[e.get("id")]=t)},fetchWidget:function(e){var t;return e=Y.one(e),e&&(t=e.get("id")),t?M.Widget.instances[t]:null},getWidgetMap:function(){return{buttontopost:"w-base",cascade:"w-select-cascade",livesearch:"w-livesearch",flashcopy:"w-flashcopy",commondialog:"w-base",headertip:"w-base",autocompletelist:"w-autocomplete",commontable:"w-table",sorttable:"w-table",ajaxtable:"w-table",paginator:"w-paginator",datepicker:"w-date",colorpicker:"w-colorpicker",timepicker:"w-date",validate:"w-validate",rating:"w-rating",dialog:"w-dialog",linkdialog:"w-dialog",bubbletip:"w-bubbletip",slider:"w-slider",verticaltab:"w-tab",tab:"w-tab",tabindex:"w-tab",picgroup:"w-image",picphotodialog:"w-image-dialog",realtimeeditor:"w-realtime-editor",hovermark:"w-hovermark",guide:"w-guide",imagecopper:"w-image-copper",collapse:"uix-collapse",tooltip:"uix-tooltip",dropdown:"uix-dropdown",sticky:"uix-sticky",tabview:"uix-tabview",scrollspy:"uix-scrollspy",smoothscroll:"uix-smoothscroll",mapview:"w-mapview"}}})},"1.0.0",{requires:["node","event","json"]});