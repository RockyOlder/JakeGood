M.add("cate-nav",function(e){var n=e.io,t=e.UA.ie,o=e.mt.util;e.mt.ComponentHub.attach("cate-nav",function(i){function a(t,i){var a,l,u,s=200,v=!1;t=e.one(t),t&&(a=t.on("hover",function(){v=!0,l&&window.clearTimeout(l),l=window.setTimeout(function(){l=null,v&&!u&&(a.detach(),u=n("/index/navcates",{method:"get",on:{success:function(e,n){var t=o.getEvalRes(n);t.status&&t.data&&i(t.data)}}}))},s)},function(){v=!1}))}function l(n){function i(){function n(){var e=this;e.addClass(d),x&&!v.one("."+f)&&(T&&window.clearTimeout(T),T=window.setTimeout(function(){e.hasClass(d)&&s(e),T=null},200))}function i(){function e(){var t=v.one("."+d);if(window.clearTimeout(g),g=null,t!==n){var o=l();return o>0?(g=window.setTimeout(e,o),void 0):(t?u():window.setTimeout(function(){u()},y),void 0)}}if(this.removeClass(d),!g){var n=this;g=window.setTimeout(e,l())}}function l(){if(L)return 0;if(X.x===q.x&&Math.abs(X.y-q.y)<2&&E.x&&X.x>E.x)return h;var e=(N[2].x-N[1].x)*(N[3].y-N[1].y)-(N[3].x-N[1].x)*(N[2].y-N[1].y),n=((N[2].x-N[0].x)*(N[3].y-N[0].y)-(N[3].x-N[0].x)*(N[2].y-N[0].y))/e,t=((N[3].x-N[0].x)*(N[1].y-N[0].y)-(N[1].x-N[0].x)*(N[3].y-N[0].y))/e,o=((N[1].x-N[0].x)*(N[2].y-N[0].y)-(N[2].x-N[0].x)*(N[1].y-N[0].y))/e;return n>0&&t>0&&o>0?y:0}function u(){var e=v.one("."+f),n=v.one("."+d);n!==e&&(e&&c(e),n&&s(n))}function s(e){var n,i,a,l=e.one(r),u=-10;e.addClass(f),l&&(l.setStyle("visibility","hidden"),l.show(),N[2].y=e.getY(),N[3].y=N[2].y+l.get("offsetHeight"),a=v.getY(),b=a+v.get("offsetHeight"),n=b-N[3].y,0>n?(i=N[2].y+e.get("offsetHeight"),n=b+u>i?n+u:n,N[2].y+n<a&&(n=a-N[2].y),l.setStyle("top",n),N[2].y+=n):l.setStyle("top",0),l.setStyle("visibility","visible")),t&&o.reflow(v)}function c(e){var n=e.one(r);e.removeClass(f),n&&n.hide()}var g=null,J=v.getX()+v.get("offsetWidth"),C=v.getY(),b=C+v.get("offsetHeight"),H={x:J,y:C},M={x:J,y:b},S=".J-nav-item",Y=e.one(document),A=null,L=!0,X={},q={},E={},N=[X,q,H,M],Q=null;p=v.on("hover",function(){x=!0,Q||(Q=Y.on("mousemove",function(e){E.x=q.x,E.y=q.y,q.x=X.x,q.y=X.y,X.x=e.pageX,X.y=e.pageY,L=!1,window.clearTimeout(A),A=window.setTimeout(function(){L=!0},y)}))},function(){x=!1,Q&&(Q.detach(),Q=null),m||window.setTimeout(function(){w||x||a()},y)}),_=v.delegate("hover",n,i,S)}function a(){6===t&&(v.all(r).hide(),v.all(".nav-level2-indication").hide()),s.removeClass(c),v.hide(),u(),g=!1}function l(){s.addClass(c),v.show(),i(),g=!0}function u(){p&&(p.detach(),p=null),_&&(_.detach(),_=null)}var s=e.one(".J-nav__trigger"),v=e.one(".J-nav__list"),c="nav-unfolded",d="nav-hover",f="nav-active",r=".J-nav-level2",y=300,h=100,m=!1,w=!1,x=!1,g=!1,T=null,p=null,_=null;s&&v&&("none"!==v.getStyle("display")&&(m=!0,i()),n&&l(),m||s.on("hover",function(){w=!0,window.setTimeout(function(){w&&(g||l())},y)},function(){w=!1,window.setTimeout(function(){w||x||a()},y)}))}var u=i.one(".J-nav__list"),s="dropdown-menu--loading",v=!1;u.hasClass("J-nav__list--present")?(u.all(".cate-nav__item--has-l2").each(function(e){function n(){v||t.addClass(s)}var t;e.append('<div class="nav-level2 J-nav-level2" style="display:none;"></div>'),t=e.one(".J-nav-level2"),t.once("mouseover",n),M.loadQueue.push(n)}),l(),a(u,function(n){var t=e.Node.create("<div>"+n+"</div>"),o=t.all(".J-nav-level2");v=!0,o.each(function(e){var n=e.getAttribute("data-level1"),t=u.one(".J-cate-nav__item--"+n),o=t&&t.one(".J-nav-level2");o&&o.removeClass(s).setHTML(e.getHTML())}),u.all("."+s).remove()})):a(".J-nav__trigger",function(e){u.append(e),l(!0)})})},"1.0.0",{requires:["mt-base"]});