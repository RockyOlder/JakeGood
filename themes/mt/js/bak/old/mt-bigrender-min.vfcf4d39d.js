M.add("mt-bigrender",function(e){var t=e.mt.ViewportTracker,a="data-br-",n="J-bigrender-data",r="br-rendered",i={init:function(a){function r(e){t.onceenter(i._getTarget(e)||e.ancestor(),function(){i.load(e)},+e.getData("offset")||0)}a=e.one(a),a&&(a.hasClass(n)?r(a):a.all("."+n).each(r))},loadImmediately:function(e){e.hasClass(n)?i.load(e):e.all("."+n).each(i.load)},getTarget:function(e){return i._getTarget(e)||e.ancestor()},_getTarget:function(t){var a,n=i.getData(t,"target");return n?(-1!==n.indexOf("|")?(a=n.split("|"),n=t[a[0]](a[1])):n=e.one(n),n):null},getData:function(e,t){return e.hasAttribute(a+t)?e.getAttribute(a+t):null},load:function(t){function a(){l&&(l=new Function("event",l),!1===l.call(t,{target:d}))||(g?d.appendChild(o.getHTML()):d.insertBefore(o.getHTML(),t),c&&(c=new Function("event",c),c.call(t,{target:d})))}if(t&&!t.hasClass(r)){t.addClass(r);var o=e.Node.create("<div>"+t.get("value")+"</div>"),d=i._getTarget(t),g=!!d,l=i.getData(t,"beforerender"),c=i.getData(t,"afterrender");d||(d=t.ancestor()),a(),t.removeClass(n)}}};e.namespace("mt.BigRender"),e.mt.BigRender=i},"1.0.0",{requires:["mt-viewporttracker"]});