M.add("mt-uiutil",function(t){var e=t.DOM;t.mt.UIUtil={toggleNode:function(e,i,o,n){var d=t.one(e);if(d){var r=d.all(i),l=d.all(o),a="hover",s=n?n:"";d.delegate("click",function(){var t=l.item(r.indexOf(this)),e=t.getStyle("display");"none"===e?(t.setStyle("display","block"),this.addClass(s)):(t.setStyle("display","none"),this.removeClass(s))},i),d.delegate("mouseover",function(){this.addClass(a)},i),d.delegate("mouseout",function(){this.removeClass(a)},i)}},getDimensions:function(i){i=t.one(i);var o,n,d=i.getDOMNode(),r=i.ancestor(),l={},a=0,s=0,h={},f={position:"absolute",visibility:"hidden",display:"block"};if(t.Array.each(["marginTop","marginBottom","marginLeft","marginRight","paddingLeft","paddingRight","paddingBottom","paddingTop","borderLeftWidth","borderRightWidth","borderBottomWidth","borderTopWidth"],function(t){l[t]=parseInt(e.getStyle(d,t),10)}),0!==d.offsetHeight)t.mix(l,{offsetHeight:d.offsetHeight,offsetWidth:d.offsetWidth,width:parseInt(e.getStyle(d,"width"),10),height:parseInt(e.getStyle(d,"height"),10)});else{for(n in f)f.hasOwnProperty(n)&&(h[n]=d.style[n],d.style[n]=f[n]);o=r.getStyle("position"),"relative"!==o&&"absolute"!==o&&r.setStyle("position","relative"),t.mix(l,{offsetHeight:d.offsetHeight,offsetWidth:d.offsetWidth}),r.setStyle("position",o);for(n in f)f.hasOwnProperty(n)&&(d.style[n]=h[n]);t.Array.each(["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],function(t){a+=l[t]}),t.Array.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(t){s+=l[t]}),l.width=l.offsetWidth-a,l.height=l.offsetHeight-s}return l},loadImg:function(){var t=[],e=null,i=function(){var e=0;for(e;e<t.length;e++)t[e].end?(e--,t.splice(e,1)):t[e]();0===t.length&&o()},o=function(){window.clearInterval(e),e=null};return function(o,n,d,r){function l(){h=g.width,f=g.height,(h!==a||f!==s||h*f>1024)&&(n&&n.call(g),l.end=!0)}var a,s,h,f,g=new Image;return g.src=o,g.complete?(n&&n.call(g),d&&d.call(g),void 0):(a=g.width,s=g.height,l(),l.end||(t.push(l),null===e&&(e=window.setInterval(i,40))),g.onerror=function(){r&&r.call(g),l.end=!0,g=g.onload=g.onerror=null},g.onload=function(){l.end||l(),d&&d.call(g),g=g.onload=g.onerror=null},void 0)}}}},"1.0.0",{requires:["mt-base","node","dom"]});